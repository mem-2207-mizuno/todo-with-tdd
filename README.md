# My Todo App

React + TypeScriptで実装予定のTodoアプリケーションです。  
ドメイン駆動設計(DDD)を意識したフォルダ構成で、TDD(テスト駆動開発)のフローに従って開発を進めます。

<br />

## 目次
- [My Todo App](#my-todo-app)
  - [目次](#目次)
  - [プロダクトの概要](#プロダクトの概要)
  - [設計思想とアーキテクチャ](#設計思想とアーキテクチャ)
  - [ディレクトリ構成](#ディレクトリ構成)
  - [TDD の進め方](#tdd-の進め方)
  - [開発・動作環境](#開発動作環境)
    - [セットアップ手順 (例)](#セットアップ手順-例)
  - [テストの実行](#テストの実行)
  - [今後の拡張例](#今後の拡張例)

---

## プロダクトの概要

- **目的**: シンプルなTodoリスト機能の開発を通じて、Reactアプリ＋DDD構成のサンプルを構築する。  
- **背景**: 将来的に機能拡張しやすい設計を模索し、ビジネスロジックの変更がUIやインフラに与える影響を最小化したい。  
- **価値**: ドメインロジックをしっかりと分離することで、業務ルールや機能追加の要望にスムーズに対応できるアプリを目指す。  

本アプリの作成にあたり**テストファースト (TDD)** を採用し、仕様を変更しやすい設計を実践していきます。

---

## 設計思想とアーキテクチャ

本プロダクトでは、ドメイン駆動設計(DDD)をベースとしたアーキテクチャを採用しています。大きく下記4つの層に分割して実装します。

1. **domain**  
   - ビジネスロジックをカプセル化する層  
   - エンティティ、値オブジェクト(Value Object)、ドメインサービスなどを定義  
2. **application**  
   - ユースケースやアプリケーションサービスを定義する層  
   - ドメイン層の機能を使って具体的な操作(タスク追加や更新)を行い、UI・インフラ層と連携  
3. **infrastructure**  
   - データ永続化、外部API通信など、外部とのやりとりの実装を行う層  
   - DBやストレージなどへのアクセス、APIコールや設定管理など  
4. **ui (presentation)**  
   - Reactコンポーネントやページを含む層  
   - ユーザーとのやりとりを担うUIロジックを扱い、application層のユースケースを呼び出す  

DDDの目的は**ビジネスロジック**がアプリケーションの中心にある状態を保ち、UI・インフラ側の変更があっても**ドメインが極力影響されない**ようにすることです。

---

## ディレクトリ構成

以下はサンプルのディレクトリ構成例です。今後の拡張や開発方針に合わせて自由に変えてください。

```
my-todo-app/
  ├─ src/
  │   ├─ domain/
  │   │   └─ todo/
  │   │       ├─ entities/
  │   │       │   ├─ Todo.ts          # Todoエンティティ
  │   │       │   └─ Todo.spec.ts     # エンティティのテスト
  │   │       ├─ valueObjects/
  │   │       │   └─ Title.ts         # タイトルなどのValue Object
  │   │       └─ repositories/
  │   │           └─ ITodoRepository.ts # リポジトリインターフェース
  │   ├─ application/
  │   │   └─ todo/
  │   │       └─ useCases/
  │   │           ├─ AddTodo.ts       # 新規Todo追加ユースケース
  │   │           └─ AddTodo.spec.ts  # 上記ユースケースのテスト
  │   ├─ infrastructure/
  │   │   └─ todo/
  │   │       └─ InMemoryTodoRepository.ts # メモリ上で動作するリポジトリ実装
  │   └─ ui/
  │       └─ components/
  │           ├─ TodoForm.tsx         # 新規TODO登録用フォームコンポーネント
  │           └─ TodoForm.spec.tsx    # UIテスト
  ├─ README.md
  ├─ package.json
  ├─ tsconfig.json
  └─ ... (その他設定ファイル)
```

---

## TDD の進め方

1. **テストを書く (Red)**  
   - 最初に要件をテストコードとして書き起こし、実装されていないため「失敗するテスト (赤)」の状態になる。  

2. **最小限の実装 (Green)**  
   - テストが通るために必要な最小限の実装を行う。  
   - 一旦テストが緑 (成功) になればOK。  

3. **リファクタリング (Refactor)**  
   - 重複コード、責務の分散、抽象化などを見直し、継続的にコードを改善する。  
   - 再度テストを実行し、緑が保たれることを確認。  

これらのサイクルを小さいステップで回しながら、**ドメインモデルやユースケース、UIの仕様を確定していく**イメージで開発を進めていきます。

---

## 開発・動作環境

- **言語**: TypeScript
- **ライブラリ/フレームワーク**: React, Jest, React Testing Library など
- **パッケージマネージャ**: npm or yarn  
- **Node.js**: バージョンを指定する場合は `.nvmrc` や `.node-version` で指定してもOK

### セットアップ手順 (例)

```bash
git clone <このリポジトリ>
cd my-todo-app

# npmの場合
npm install

# yarnの場合
yarn install
```

<br />

## テストの実行

```bash
# npmの場合
npm run test

# yarnの場合
yarn test
```

- **テストツール**: Jest / React Testing Library  
- **テストファイルの置き場所**: 各実装ファイルと同じディレクトリに `*.spec.ts(x)` の形で配置してあります。  
- **カバレッジレポート**の出力やウォッチモードなども活用して、TDDを効率的に回してください。

---

## 今後の拡張例

- **UI/UXの拡張**  
  - Todoの完了/未完了切り替え  
  - Todoリストの検索・フィルター機能  
  - ページングやソート順変更など  
- **インフラ層の強化**  
  - 永続化にローカルストレージやIndexedDBを使用する  
  - さらにサーバーサイドと連携してデータ永続化を行う  
- **ドメインロジックの強化**  
  - 期限付きTodo、ラベル付けなどのドメインルール追加  
  - ユニットテストやユースケーステストの拡充  
- **CI/CDとの連携**  
  - GitHub Actionsなどを用いてテスト実行～ビルドまで自動化  
  - PRやコミット時のテスト自動実行
